sudo: required
dist: trusty

language: cpp
compiler:
  - clang

services:
  - docker

before_install:
  - git config user.email "travis@build.bot" && git config user.name "Travis CI"
  - git tag -a -m "Travis build" init
  - git clone https://github.com/$TRAVIS_REPO_SLUG.git "$TRAVIS_REPO_SLUG"
  - mkdir artifacts
  - docker pull nicolaw/trinitycore

script:
  - docker run -it --rm -v "$PWD/artifacts":/artifacts nicolaw/trinitycore -r "$TRAVIS_REPO_SLUG"
  - docker ps -a
  - ./artifacts/authserver --version
  - ./artifacts/worldserver --version